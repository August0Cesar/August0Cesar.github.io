<!DOCTYPE html>

<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>Título da página</title>
    <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap:">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

</head>

<body>

    <div class="container">
        <h1>Augusto César da Cunha Matos</h1>

        <div id="div1">
            <button onClick="print()">Call FLutter Webview</button>
        </div>

    </div>
    <br><br>
    <br>

    <div class="container">
        <h2>Gravador de Áudio</h2>

        <div class="row justify-content-md-center">
            <div class="col-md-auto">
                <span class="material-icons" onclick="start_recorder()">
                    play_arrow
                </span>
            </div>
            <div class="col-md-auto">
                <span class="material-icons" onclick="stop_recorder()">
                    stop
                </span>
            </div>
            <div class="col col-lg-2">
                <span class="material-icons" onclick="play_recorder()">
                    play_circle_filled
                </span>
            </div>
        </div>
    </div>

    <div class="container" style="background-color: skyblue;">
        <h2>Navegar para outra tela</h2>
        <a href="other.html"> Other screen</a>
    </div>



    <script>
        setInterval(function(){ findStatusRecording(); }, 3000);
        //javascript chamando flutter para saber status gravação
        function findStatusRecording(){
            GetSituationJS.postMessage("{\"onCalback\":\"onGetSituation\"}");
        }
        //função chamada pelo Flutter para retornar status da gravação
        function onGetSituation(statusRecording){
            console.log("Situation=>  " + statusRecording)
        }



        /*****Funções JS para chamar o Flutter*****/
        function start_recorder() {
            AudioJSChannel.postMessage('START_RECORD');
        }

        function stop_recorder() {
            AudioJSChannel.postMessage('STOP_RECORD');
        }

        function play_recorder() {
            AudioJSChannel.postMessage('PLAY_RECORD');
        }

        function print() {
            Print.postMessage('Hello World being called from Javascript code');
        }

        
        

        /*****Funções chamadas pelo Flutter*****/

        //função chamada pelo Flutter pra saber se ainda esta na pagina de gravar
        function isActiveWebViewFromFlutter(){
            return "Yes! I'm active."
        }

        //função chamada pelo Flutter quando da algun erro na gravação
        function onErrorFromFlutter(errorMessage){
            console.log(errorMessage);
        }

        //função chamada pelo Flutter quando terminou de tirar photo
        function onReceivedImageFromFlutter(value) {
            console.log(value);
            div1 = document.getElementById("div1");
            var divNova = document.createElement("p");
            divNova.innerHTML = value;
            div1.appendChild(divNova);
        }
        
        //função chamada pelo Flutter para retornar status da gravação
        function onRecivedStatusRecording(statusRecording){
            console.log(statusRecording)
        }
       
    </script>
</body>

</html>
